<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>

<script src="js/jquery-1.10.2.js"></script>
<script src="js/jquery.cursometer.1.0.0.js"></script>


<style>
#cube_image{
	cursor:pointer;
}
</style>


<script>


$(function() {
    
    var $speedometer = $('#speedometer');
    var mouse_speed = 0;
	var inertia = 10;
	
    $(document).cursometer({
        onUpdateSpeed: function(speed) {
           mouse_speed = speed;
        },
        updateSpeedRate: 20
    });
	
	function mouse_function() {
		if (inertia < 500)
			inertia += mouse_speed;
		$speedometer.text(inertia);
	}
	

	$('#cube_image').mousedown(function(){	
		var mouse_interval_function = setInterval(function(){
			mouse_function()
		}, 20);
				
		$(document).mouseup(function(){
		 	clearInterval(mouse_interval_function);
		});
	});
	
	var current_image = 1;
	var cube_animation = function(){
		$("#cube_image").attr("src", "images/cubeSpin_v01_0" + current_image + ".png");
			current_image++;
			
			if (current_image > 48)
				current_image = 1;
				
		clearInterval(interval);
		interval = setInterval(cube_animation,  500 / Math.sqrt(inertia));
	}
	var interval = setInterval(cube_animation,  500 / Math.sqrt(inertia));
	
	
	var friction = setInterval(function(){
		if (inertia > 10)
			{
			inertia = inertia * .995;	
			}
	},  100);

    
});

</script>

</head>

<body>

<img id="cube_image" src="images/cubeSpin_v01_01.png" draggable="false" style="margin-left:auto; margin-right:auto; position:relative; display:block;"></div>
<div id="speedometer"></div>

</body>
</html>
