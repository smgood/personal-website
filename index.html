<!DOCTYPE html>
<html lang="en">
<head>

  <!--      

  Now that you're looking at this, do you want to grab a coffee and talk about future opportunities?
  Message me at sean@smgoodrich.com

  I Look forward to meeting you!

  Thanks,
  Sean
    ______     ______     ______     ______ 
   /\  ___\   /\  ___\   /\  __ \   /\   \ \
   \ \___  \  \ \  __\   \ \  __ \  \ \ \ \ \
    \/\_____\  \ \_____\  \ \_\ \_\  \ \_\___\
     \/_____/   \/_____/   \/_/\/_/   \/_/___/
      
  -->

    <title>Sean Goodrich</title>
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico"/>
    <meta charset="utf-8">
    <meta name="description" content="This is Sean's personal website. He is a Software Engineer based in Los Angeles.">
	<meta name="author" content="Sean Goodrich">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="keywords" content="Sean, Goodrich, UM, Michigan, Computer, Science, Los, Angeles, LA">
            
    <script type="text/javascript" src="projectInfo.js"></script>
    <script type="text/javascript" src="portfolio.js"></script>
    <script type="text/javascript" src="links.js"></script>
            
    <link rel="stylesheet" type="text/css" href="css/MainStyleSheet.css" />
    <link rel="stylesheet" type="text/css" href="css/jquery.fullPage.css" />
    
    <script src="js/dat.gui.min.js"></script>
    <script src="js/three.min.js"></script>
            
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/jquery.slimscroll.min.js"></script>
    <script type="text/javascript" src="js/jquery.fullPage.js"></script>
            
    <script src="js/Detector.js"></script>
    <script src="js/tween.min.js"></script>

</head>
<body>

		<div id ="container"></div>

        <div id = "continue">
        	Scroll &#9661 Down
        </div>
                
        <div id="fullpage">
        
            <div class="section " id="section0">
            </div>
        
            <div class="section" id="section1">
            </div>
        
            <div class="section" id="section2">
                <img id="signature" src="images/signature_white.png"/>
                <div id ="bottom">
        		</div>
            </div>
        
        </div>   
        
        <div id = "instructions">
        	Drag to spin projects. Hover to</br>play. Click for more info.
        </div>
        
    	<div id = "opacity_page" >
		</div>
        
        <div id = "info_page">
        
            <div id="close">
             	<img id="delete_box" src="images/close_box.png"/>
                Close
          	</div> 
            
            <div id = "gallery">
                <img id = "photo"/>
            </div>
            <div id = "text">
                <div id = "project_title"></div>
                    </br>
               
                <div id = "project_year"></div>
                    </br>
 				
                <p id = "project_team" class="paragraph">
                </p> 
               
                <a id = "project_link" class = "title" target="_blank">Link</a>
                    
                <p id = "project_summary" class="paragraph">
                </p>
                    
 				<p id = "project_role" class="paragraph">
                </p>
                    
 				<p id = "project_skills" class="paragraph">
                </p>
        	</div>
        </div>


<script type="text/javascript">

		var scroll_height;
		var scrolling = false;
		var explode = false;
		var stop_logo = true;
		var current_page;
		
		var touchScrollHeight;
		var touchScrolled;
		
		var portfolio_loaded = false;
		var loaded_pg2 = false;
		var loaded_pg3 = false;
		
		var linksClass;
		var portfolioClass;

		$(document).ready(function() {
			page1 = new S_Logo();
			page2 = new Portfolio();
			create_Logo();
			page2.init();

			$('#fullpage').fullpage({

				sectionsColor: ['#000000', '#282828', '#33383D'],

				navigation: true,

				navigationPosition: 'right',
	
	        	scrollingSpeed: 1000,
								
				navigationTooltips: ['Logo', 'Portfolio', 'Connect'],
				
				 'onLeave': function(index, nextIndex, direction)
				 	{
					scrolling = true;
					if (index == 1)  
						{  
						ExplodeFunction(); 
						$("#continue").fadeOut(function()
							{
							if (nextIndex == 2)
									$("#instructions").fadeIn();
							});
							
							if (nextIndex == 2)
								{
								setTimeout(function(){ portfolioClass.portfolioAppear(250); }, 2000);
								//actualRotation = targetRotation= = 0;
								loaded_pg2 = true;
								} 	
							else if (nextIndex == 3)
								{
								linksClass.linksAppear(250);
								loaded_pg3 = true;	
								window.setTimeout(function(){linksClass.showLinks = true;}, 250 * 7);
								}
						}
					else if (index == 2)
						{
						page2.noHoverPortfolio();
							
						$("#instructions").fadeOut(function()
							{
							if (nextIndex == 1)
								$("#continue").fadeIn();
							});
								
						if (nextIndex == 3 && loaded_pg3 == false)
							{
							loaded_pg3 = true;
							linksClass.linksAppear(250);
							window.setTimeout(function(){linksClass.showLinks = true;}, 250 * 7);
							}
						}
					else
						{
						page2.noHoverLinks();
						
						if (nextIndex == 1)
							$("#continue").fadeIn();
						else if (nextIndex == 2)
							{
							$("#instructions").fadeIn();
							if (loaded_pg2 == false)
								{
								loaded_pg2 = true;
								portfolioClass.portfolioAppear(250);
								//actualRotation = targetRotation= = 0;
								}
							}
						}
							
					if (nextIndex == 1)
						{
						create_Logo();
						loaded_pg2 = false;
						portfolioClass.hidePortfolio(250);
						}
					else if (portfolio_loaded == false)
						{
						page2.animate();
						portfolio_loaded = true;
						}
       				},
					
				'afterLoad': function(anchorLink, index)
				 	{
					scrolling = false;
					current_page = index;
       				}
					

			});
			
			// Add actions to the arrows
			$('#continue').on('click touchstart', function() {
				$.fn.fullpage.moveSectionDown();
			});

			function create_Logo ()	{
				explode = false;
				$( "#container" ).empty();
				
				page1.init();
						
				if (stop_logo  == true)
					{
					stop_logo = false;
					page1.animate();
					}
						
				document.getElementById("container").style.top = "0px";
				document.getElementById("continue").style.top = "93%";
				}
				
				
			function ExplodeFunction () {
					explode = true;
					portfolioClass.resetPortfolio();
					setTimeout(function(){ 
						if (explode == true)
							{
							stop_logo = true; 
							$( "#container" ).empty();
							}
					}, 2000);			
			}

			setInterval(function () 
				{
				var node = document.getElementById("fullpage");
				scroll_height = -1 * node.getBoundingClientRect().top; //real offset top			
				}, 20);
			
			function onDocumentTouchStart( event ) {
				if ( event.touches.length === 1 ) {
					event.preventDefault();
					touchScrollHeight = event.touches[ 0 ].pageY;
					touchScrolled = false;
				}
			}
			
			function onDocumentTouchMove( event ) {
				if ( event.touches.length === 1 && touchScrolled == false && $("#info_page").is(':hidden') ) {
					event.preventDefault();
					if(touchScrollHeight - event.touches[ 0 ].pageY > 50) {
						$.fn.fullpage.moveSectionDown();
						touchScrolled = true;
					} else if (touchScrollHeight - event.touches[ 0 ].pageY < -50) {
						$.fn.fullpage.moveSectionUp();
						touchScrolled = true;
					}
				}
			}
			
			document.addEventListener( 'touchstart', onDocumentTouchStart, false );	
			document.addEventListener( 'touchmove', onDocumentTouchMove, false );
			
			var doScroll = function (event) {
				event.preventDefault();
				event = window.event || event;
				
				var delta = event.wheelDeltaY;
				if (Math.abs(delta) < 100 || $("#info_page").is(':visible') )
					$.fn.fullpage.setMouseWheelScrolling(false);
				else
					$.fn.fullpage.setMouseWheelScrolling(true);
				/*
				event.preventDefault();
				event = window.event || event;
				
				var delta = event.wheelDeltaY;
				console.log(delta);
				if (delta > 100 && changePage == false) {
					$.fn.fullpage.moveSectionUp();
					changePage = true;
				}
				else if (delta < -100 && changePage == false) {
					$.fn.fullpage.moveSectionDown();
					changePage = true;
				}
				
				clearTimeout(wheeling);
				wheeling = setTimeout(function() {
					console.log('stop wheeling!');
					wheeling = undefined;
					changePage = false;
				}, 50);
				*/
				
			};
		
			window.addEventListener('mousewheel', doScroll, false);
			//window.addEventListener('DOMMouseScroll', doScroll, false);
					
			
		});

</script>


<script>
	var S_Logo = function(){ 

			var group;
			var container;
			var particlesData = [];
			var camera, scene, renderer;
			var positions,colors;
			var pointCloud;
			var particlePositions;
			var linesMesh;

			var maxParticleCount = 500;
			var particleCount = 500;
			var sHeight = 800;
			var rHalf = sHeight / 2;
			var collision_rad = 100;

			var effectController = {
				showDots: false,
				showLines: true,
				minDistance: 65,
				limitConnections: false,
				maxConnections: 20,
				particleCount: 500
			}

			var flipped = 1;


			function init() {
				particlesData = [];
				particleCount = 10;
				
				container = document.getElementById("container");
				
				camera = new THREE.PerspectiveCamera( 45, window.innerWidth / (window.innerHeight), 1, 10000 );
				camera.position.z = 1300;

				scene = new THREE.Scene();

				group = new THREE.Group();
				scene.add( group );
				
				var segments = maxParticleCount * maxParticleCount;

				positions = new Float32Array( segments * 3 );
				colors = new Float32Array( segments * 3 );

				var pMaterial = new THREE.PointCloudMaterial( {
					color: 0xFFFFFF,
					size: 3,
					blending: THREE.AdditiveBlending,
					transparent: true,
					sizeAttenuation: false
				} );

				particles = new THREE.BufferGeometry();
				particlePositions = new Float32Array( maxParticleCount * 3 );

				for ( var i = 0; i < maxParticleCount; i++ ) {
					var y = (Math.random() * 4/3 * sHeight) - (2/3 * sHeight);
					var x = 0;
					if (y>rHalf)
						{
						y = y - rHalf/3;
						x = 15*Math.sqrt(rHalf-y) + (Math.random() * 2 * collision_rad - collision_rad);
						}
					else if (y< -rHalf)
						{
						y = y + rHalf/3;
						x = -15*Math.sqrt(rHalf+y) + (Math.random() * 2 * collision_rad - collision_rad);	
						}
					else
						x = (-Math.sin(y * Math.PI / rHalf) * rHalf/2) + (Math.random() * 2 * collision_rad - collision_rad);
					
					var z = Math.random() * collision_rad - collision_rad/2;

					particlePositions[ i * 3     ] = x;
					particlePositions[ i * 3 + 1 ] = y;
					particlePositions[ i * 3 + 2 ] = z;

					// add it to the geometry
					particlesData.push( {
						velocity: new THREE.Vector3( -.5 + Math.random() * 1, -.5 + Math.random() * 1,  -.5 + Math.random() * 1 ),
						numConnections: 0
					} );

				}

				particles.drawcalls.push( {
					start: 0,
					count: particleCount,
					index: 0
				} );

				particles.addAttribute( 'position', new THREE.DynamicBufferAttribute( particlePositions, 3 ) );

				// create the particle system
				pointCloud = new THREE.PointCloud( particles, pMaterial );
				group.add( pointCloud );
				//pointCloud.visible = false;
				
				var geometry = new THREE.BufferGeometry();

				geometry.addAttribute( 'position', new THREE.DynamicBufferAttribute( positions, 3 ) );
				geometry.addAttribute( 'color', new THREE.DynamicBufferAttribute( colors, 3 ) );

				geometry.computeBoundingSphere();

				geometry.drawcalls.push( {
					start: 0,
					count: 0,
					index: 0
				} );

				var material = new THREE.LineBasicMaterial( {
					vertexColors: THREE.VertexColors,
					blending: THREE.AdditiveBlending,
					transparent: true
				} );

				linesMesh = new THREE.Line( geometry, material, THREE.LinePieces );
				group.add( linesMesh );

				//

				renderer = new THREE.WebGLRenderer( { antialias: true, alpha: true } );
				renderer.setClearColor( 0xffffff, 0 ); // the default
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight);

				renderer.gammaInput = true;
				renderer.gammaOutput = true;

				container.appendChild( renderer.domElement );

				window.addEventListener( 'resize', onWindowResize, false );
			}

			function onWindowResize() {
				camera.aspect = window.innerWidth / (window.innerHeight);
				camera.updateProjectionMatrix();
				renderer.setSize( window.innerWidth, window.innerHeight);
				
				$(".section").height(window.innerHeight);
				
				var transform = 'translate3d(' + 0 + 'px, ' +((1-current_page) * window.innerHeight)+ 'px, 0)';
 				document.getElementById("fullpage").style.MozTransform = transform;
 				document.getElementById("fullpage").style.WebkitTransform = transform;
 				document.getElementById("fullpage").style.OTransform = transform;
 				document.getElementById("fullpage").style.transform = transform;				
			}
			
			function animate() {
					
				var vertexpos = 0;
				var colorpos = 0;
				var numConnected = 0;
				
				if (particleCount < 500)
					{
					particleCount+=10;	
					particles.drawcalls[ 0 ].count = particleCount;
					}
					
				for ( var i = 0; i < particleCount; i++ )
					particlesData[ i ].numConnections = 0;

				for ( var i = 0; i < particleCount; i++ ) {

					// get the particle
					var particleData = particlesData[i];

					particlePositions[ i * 3     ] += particleData.velocity.x;
					particlePositions[ i * 3 + 1 ] += particleData.velocity.y;
					particlePositions[ i * 3 + 2 ] += particleData.velocity.z;
				
					xPos = particlePositions[ i * 3];
					yPos = particlePositions[ i * 3 +1];
					zPos = particlePositions[ i * 3 +2];
					
					xVel = particleData.velocity.x; 
					yVel = particleData.velocity.y;
					zVel = particleData.velocity.z;
					
					if (explode == true)
						{
						particleData.velocity.x *= 1.07; 
						particleData.velocity.y *= 1.07;
						particleData.velocity.z *= 1.07;
						
						if (scroll_height > window.innerHeight)
							{
							document.getElementById("container").style.top = window.innerHeight - scroll_height + "px";
							document.getElementById("continue").style.top = 1.93 * window.innerHeight - scroll_height + "px" ;
							}
						}
						
					else
						{
						if (Math.abs(xPos) > rHalf/2)
							particleData.velocity.x = -xVel;
								
						if (Math.abs(yPos) > rHalf)
							particleData.velocity.y = -yVel;
						
						if (Math.abs(zPos) > collision_rad)
							particleData.velocity.z = -zVel;
						
						// boundary conditions for top quadratic part of S 	
						if (xPos > 0 && yPos > rHalf/2 && yPos < 2*rHalf/3)
									{
									particleData.velocity.y = -yVel;
									}	
						else if (xPos > 0 && yPos > 2*rHalf/3)
									{
									var estimated_width = 15*Math.sqrt(rHalf-yPos);
									var rad_quad = Math.abs(xPos - estimated_width);
									if (rad_quad > collision_rad)
										{
										parallel_vector = -15/(2*Math.sqrt(rHalf-yPos));
										normal_vector = -1 / parallel_vector;
										normal_norm = Math.sqrt(Math.pow(normal_vector,2) + 1);
										normal_x = 1 / normal_norm;
										normal_y = normal_vector / normal_norm;
										
										dot_product = -2 * (xVel * normal_x + yVel * normal_y);
										
										particleData.velocity.x = dot_product * normal_x + xVel;
										particleData.velocity.y = dot_product * normal_y + yVel;
										
										if (rad_quad > (1.1 * collision_rad) || Math.abs(zPos) > (1.1 * collision_rad))
											{
											particlePositions[ i * 3] = estimated_width;
											}	
										}
									}
							// boundary conditions for bottom quadratic part of S 
							else if (xPos < 0 && yPos < -rHalf/2 && yPos > -2*rHalf/3)
									{
									particleData.velocity.y = -yVel;
									}		
							else if (xPos < 0 && yPos < -2*rHalf/3)
									{
									var estimated_width = -15*Math.sqrt(rHalf+yPos);
									var rad_quad = Math.abs(xPos - estimated_width);
									if (rad_quad > collision_rad)
										{
										parallel_vector = -15/(2*Math.sqrt(rHalf+yPos));
										normal_vector = -1 / parallel_vector;
										normal_norm = Math.sqrt(Math.pow(normal_vector,2) + 1);
										normal_x = 1 / normal_norm;
										normal_y = normal_vector / normal_norm;
										
										dot_product = -2 * (xVel * normal_x + yVel * normal_y);
										
										particleData.velocity.x = dot_product * normal_x + xVel;
										particleData.velocity.y = dot_product * normal_y + yVel;
										
										if (rad_quad > (1.1 * collision_rad) || Math.abs(zPos) > (1.1 * collision_rad))
											{
											particlePositions[ i * 3] = estimated_width;
											}	
										}
									}		
							// boundary conditions for middle Sin Wave part of S 			
							else
									{
									var expected_width = -Math.sin(yPos * Math.PI / rHalf) * rHalf/2;
									var rad_sin = Math.abs(xPos - expected_width);
									if (rad_sin > collision_rad)
										{
										parallel_vector = -Math.cos(yPos * Math.PI / rHalf);
										normal_vector = -1 / parallel_vector;
										normal_norm = Math.sqrt(Math.pow(normal_vector,2) + 1);
										normal_x = 1 / normal_norm;
										normal_y = normal_vector / normal_norm;
										
										dot_product = -2 * (xVel * normal_x + yVel * normal_y);
										
										particleData.velocity.x = dot_product * normal_x + xVel;
										particleData.velocity.y = dot_product * normal_y + yVel;
										
										if (rad_sin > (1.1 * collision_rad) || Math.abs(zPos) > (1.1 * collision_rad))
											{
											particlePositions[ i * 3] = expected_width;
											}
										}	
									}
						}

					if ( effectController.limitConnections && particleData.numConnections >= effectController.maxConnections )
						continue;

					// Check collision
					for ( var j = i + 1; j < particleCount; j++ ) {

						var particleDataB = particlesData[ j ];
						if ( effectController.limitConnections && particleDataB.numConnections >= effectController.maxConnections )
							continue;

						var dx = particlePositions[ i * 3     ] - particlePositions[ j * 3     ];
						var dy = particlePositions[ i * 3 + 1 ] - particlePositions[ j * 3 + 1 ];
						var dz = particlePositions[ i * 3 + 2 ] - particlePositions[ j * 3 + 2 ];
						var dist = Math.sqrt( dx * dx + dy * dy + dz * dz );

						if ( dist < effectController.minDistance ) {

							particleData.numConnections++;
							particleDataB.numConnections++;

							var alpha = 1.0 - dist / effectController.minDistance;

							positions[ vertexpos++ ] = particlePositions[ i * 3     ];
							positions[ vertexpos++ ] = particlePositions[ i * 3 + 1 ];
							positions[ vertexpos++ ] = particlePositions[ i * 3 + 2 ];

							positions[ vertexpos++ ] = particlePositions[ j * 3     ];
							positions[ vertexpos++ ] = particlePositions[ j * 3 + 1 ];
							positions[ vertexpos++ ] = particlePositions[ j * 3 + 2 ];

							// need to account for x position
							if (flipped * particlePositions[ i * 3 + 1 ] < ( 1042 * (scroll_height/window.innerHeight - 47/400)) - 400)
								alpha = (40 / 255) * (1-alpha) + alpha;

							colors[ colorpos++ ] = alpha;
							colors[ colorpos++ ] = alpha;
							colors[ colorpos++ ] = alpha;

							colors[ colorpos++ ] = alpha;
							colors[ colorpos++ ] = alpha;
							colors[ colorpos++ ] = alpha;

							numConnected++;
						}
					}
				}


				linesMesh.geometry.drawcalls[ 0 ].count = numConnected * 2;
				linesMesh.geometry.attributes.position.needsUpdate = true;
				linesMesh.geometry.attributes.color.needsUpdate = true;

				pointCloud.geometry.attributes.position.needsUpdate = true;
				
				if (stop_logo == false)
					{
					requestAnimationFrame( animate );
					render();
					}
			}
			
			function render() {

				var time = Date.now() * 0.00015;
				
				if (time%4 > 0.5 && time%4 < 2.5)
					flipped = 1;
				else
					flipped = -1;
					
					
				if (time%4 < 1)
					{
					group.rotation.y = (1-Math.pow(Math.sin(time%2 * Math.PI/2),2)) * Math.PI;
					group.rotation.x = (1-Math.pow(Math.sin(time%2 * Math.PI/2),2)) * Math.PI;
					flipped = -1 * Math.cos(time%4 * Math.PI);
					}
				else if (time%4 < 2)
					{
					group.rotation.y = 0;
					group.rotation.x = 0;
					flipped = 1;
					}
				else if (time%4 < 3)
					{
					group.rotation.y = Math.pow(Math.sin(time%2 * Math.PI/2),2) * Math.PI;
					group.rotation.x = Math.pow(Math.sin(time%2 * Math.PI/2),2) * Math.PI;
					flipped = Math.cos(time%4 * Math.PI);
					}
				else
					{
					group.rotation.y = Math.PI;
					group.rotation.x = Math.PI;	
					flipped = -1
					}
					
				renderer.render( scene, camera );

			}
			
			 return {
				"init": init,
				"animate":animate
			 };
		
		}
</script>
      
      
<script>

	var Portfolio = function(){ 

			if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

			var container;
			var camera, scene, renderer;
			var mouseX = 0;
			var mouseY = 0;
			
			var controls;
			var objects = [];
			
			var windowHalfX = window.innerWidth / 2;
			var windowHalfY = window.innerHeight / 2;
			
			var raycaster = new THREE.Raycaster();
			var mouse = new THREE.Vector2();
			mouse.x = windowHalfX; //preset to big number so raycast doesn't initialize video onload
			mouse.y = windowHalfY; //preset to big number so raycast doesn't initialize video onload
			
			var actualRotation = 0;
			var targetRotation = 0;
			var targetRotationOnMouseDown = 0;
			var mouseXOnMouseDown = 0;
						
			function init() {

				container = document.createElement('div');
				container.id = "container2";
				document.body.appendChild( container );

				camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 10000 );
				camera.position.z = 3000;
				camera.position.y = 2050*(1.5 - scroll_height/window.innerHeight);
				camera.position.x = 0;

				scene = new THREE.Scene();
				
				var light = new THREE.DirectionalLight( 0xffffff );
				light.position.set(0.2, 0, 1 ).normalize();
				scene.add( light );
				
				var ambient = new THREE.AmbientLight(0x222222); 
				scene.add( ambient );

				portfolioClass = new lib_3D_portfolio(scene);

				for ( var i = 0; i < project_info.length; i++ ) {
					portfolioClass.createMesh(project_info[i], i);
				}
								
 				renderer = new THREE.WebGLRenderer( { alpha: true } );
				renderer.setSize( window.innerWidth, window.innerHeight);
				container.appendChild( renderer.domElement );
			
				linksClass = new lib_3D_links(scene);
				
				var linkedIn_geometry = linksClass.createLinkedInShape();
				linksClass.createIcon(linkedIn_geometry, 0x007bb6, -500, 400 , 1000, "https://www.linkedin.com/in/smgoodrich");		
	
				var facebook_geometry = linksClass.createFacebookShape();	
				linksClass.createIcon(facebook_geometry, 0x3B5998, -500, 0 , 1000, "https://www.facebook.com/sean.m.goodrich");		
	
				var google_geometry = linksClass.createGoogleShape();
				linksClass.createIcon(google_geometry, 0xdd4b39, -500, -400 , 1000, "https://www.google.com/+SeanGoodrichMitchell");		
	
				var github_geometry = linksClass.createGithubShape();			
				linksClass.createIcon(github_geometry, 0xffffff, 175, 400 , 1000, "https://github.com/smgood");		
	
				var email_geometry = linksClass.createEmailShape(); 
				linksClass.createIcon(email_geometry, 0x42A883, 175, 0 , 1000, "mailto:sean@smgoodrich.com");		
	
				var resume_geometry = linksClass.createResumeShape();
				linksClass.createIcon(resume_geometry, 0x759E4C, 175, -400 , 1000, "http://smgoodrich.com/resume/resume_sean_goodrich.pdf");		

				
				raycaster = new THREE.Raycaster();

				renderer.autoClear = false;
				
				document.addEventListener( 'mousemove', onMouseMove, false );
				document.addEventListener( 'mousedown', onDocumentMouseDown, false );
				document.addEventListener( 'touchstart', onDocumentTouchStart, false );
				document.addEventListener( 'touchmove', onDocumentTouchMove, false );
				
				window.addEventListener( 'resize', onWindowResize, false );
				
				document.addEventListener( 'touchstart', touchIcon, false );
				document.addEventListener( 'touchstart', touchPortfolio, false );

				renderer.setClearColor( 0x000000, 0 ); // the default
			}
			
			
			var box_clicked = false;
			var down_clicked;
			var start_position;
			
			// stuff to do with the portfolio info 
			$( document ).ready(function() {				
				$( 'body' ).click(function(){
						if (current_link != null)
							{
							window.open(current_link.link, '_blank');
							}
				});
				$("#close").click(function()
					{
					$("#opacity_page").fadeOut();
					$("#info_page").fadeOut();
					document.addEventListener( 'mousedown', onDocumentMouseDown, false );
					});
			});

			function onMouseMove( event ) {
				mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
				mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;		
			}
			
			function onWindowResize() {

				windowHalfX = window.innerWidth / 2;
				windowHalfY = window.innerHeight / 2;

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight);
				
				resizeInfo();
			}

			//	
			function resizeInfo () {
				var gallery_ratio;
				if ($(window).height() + 20 > (1/0.85)*$(window).width())
					{
					$("#info_page").css( { width : $(window).width() - 20 } );
					$("#info_page").css( { marginLeft : "10px" } );
					var gallery_ratio = ($(window).height() * 0.76) / ($(window).width() - 20);
					}
				else
					{
					$("#info_page").css( { width : "85vh" } );
					var marginLeft = ($(window).width() - 0.85*$(window).height())/2;
					$("#info_page").css( { marginLeft : marginLeft } );		
					var gallery_ratio = (0.76 /  0.85);
					}
				
				var photo = document.getElementById("photo");
				var photo_ratio = photo.naturalHeight / photo.naturalWidth;
				
				if (photo_ratio > 1) // if photo height < gallery height then go back to vertical split
					{
					gallery_ratio *= 2; 
					if (photo_ratio > 0.75 * gallery_ratio)
						{
						$("#gallery").css( {height : "100%", width : "50%" } );
						$("#text").css( {height : "100%", width: "50%", top : "0%", left : "50%" } );
						$("#photo").height("auto").width("95%");	
					
						$("#text").css( { marginLeft : "0" } );
						$("#gallery").css( { marginLeft : "0" } );
						$("#close").css( { marginLeft : "0" } );
						}
					else
						{	
						var info_width = ($(window).height() * 0.38) / photo_ratio;	
						$("#gallery").css( {height : "50%", width : info_width } );
						$("#text").css( {height : "50%", width: info_width, top : "50%", left : "0%" } );
						$("#photo").height("100%").width("auto");	
						
						var marginLeft = ($("#info_page").width() - info_width) / 2;
						$("#text").css( { marginLeft : marginLeft  + "px" } );
						$("#gallery").css( { marginLeft : marginLeft  + "px" } );
						$("#close").css( { marginLeft : marginLeft + "px" } );	
						}
					}
				else
					{
					gallery_ratio /= 2; 
					$("#gallery").css( {height : "50%" } );
					$("#text").css( {height : "50%", top : "50%", left : "0%" } );
					
					if (gallery_ratio > photo_ratio)
						{
						$("#photo").height("auto").width("100%");	
						$("#text").width("100%");						
						$("#gallery").width("100%");		
						
						$("#text").css( { marginLeft : "0" } );
						$("#gallery").css( { marginLeft : "0" } );
						$("#close").css( { marginLeft : "0" } );
						}
					else
						{
						$("#photo").height("100%").width("auto");	
						var info_width = ($(window).height() * 0.38) / photo_ratio;
						$("#text").width(info_width);							
						$("#gallery").width(info_width);	
						
						var marginLeft = ($("#info_page").width() - info_width) / 2;
						$("#text").css( { marginLeft : marginLeft  + "px" } );
						$("#gallery").css( { marginLeft : marginLeft  + "px" } );
						$("#close").css( { marginLeft : marginLeft + "px" } );						
						}
					}
			}

			function onDocumentMouseDown( event ) {

				event.preventDefault();

				document.addEventListener( 'mousemove', onDocumentMouseMove, false );
				document.addEventListener( 'mouseup', onDocumentMouseUp, false );
				document.addEventListener( 'mouseout', onDocumentMouseOut, false );

				mouseXOnMouseDown = event.clientX - windowHalfX;
				targetRotationOnMouseDown = targetRotation;
				
  				if (current_mesh != null)
					{
					box_clicked = true;
					down_clicked = current_mesh;
					start_position = mouseX;

					timeout = setInterval(function(e)
						{
						if (current_mesh != down_clicked || Math.abs(start_position - mouseX) > 30)
							{
							box_clicked = false;
							clearInterval(timeout);
							}
						}, 50);
					}
			}

			function onDocumentMouseMove( event ) {

				mouseX = event.clientX - windowHalfX;

				targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.008;

			}

			function onDocumentMouseUp( event ) {
				event.preventDefault();
				if (box_clicked == true)
						{
						clearInterval(timeout);
						box_clicked = false;	
						document.removeEventListener( 'mousedown', onDocumentMouseDown, false );
						
						// 1st number represents number of inputs
						var current_project = down_clicked.info;		
						
						$("#project_title").html(current_project.title);	
						$("#project_year").html(current_project.date);	
						
						if (current_project.team == "NA")
							$("#project_team").html("");	
						else
							{
							$("#project_team").html(
								"<font class='title'>Team members: </font>" + 
								current_project.team);	
							}
							
						if (current_project.url == "NA")
							$("#project_link").hide();	
						else
							{
							$("#project_link").show();
							$("#project_link").attr("href", current_project.url)
							}
						
						$("#project_summary").html(
								"<font class='title'>Summary: </font>" + 
								current_project.summary);	
						
						if (current_project.role == "NA")
							$("#project_role").html("");	
						else
							{
							$("#project_role").html(
								"<font class='title'>Primary Role: </font>" + 
								current_project.role);	
							}	
						
						$("#project_skills").html(
								"<font class='title'>Skills: </font>" + 
								current_project.skills);		
						
						$("#photo").one("load", function() 
							{
								resizeInfo();
								$("#opacity_page").fadeIn();
								$("#info_page").fadeIn();
							}).attr("src", "images/" + current_project.image); 
						}	

				document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
				document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
				document.removeEventListener( 'mouseout', onDocumentMouseOut, false );
			}

			function onDocumentMouseOut( event ) {

				document.removeEventListener( 'mousemove', onDocumentMouseMove, false );
				document.removeEventListener( 'mouseup', onDocumentMouseUp, false );
				document.removeEventListener( 'mouseout', onDocumentMouseOut, false );

			}

			function onDocumentTouchStart( event ) {

				if ( event.touches.length === 1 ) {

					event.preventDefault();

					mouseXOnMouseDown = event.touches[ 0 ].pageX - windowHalfX;
					targetRotationOnMouseDown = targetRotation;

				}

			}

			function onDocumentTouchMove( event ) {

				if ( event.touches.length === 1 ) {

					event.preventDefault();

					mouseX = event.touches[ 0 ].pageX - windowHalfX;
					targetRotation = targetRotationOnMouseDown + ( mouseX - mouseXOnMouseDown ) * 0.008;

				}

			}

		function animate() {
				camera.position.y = 2050*(1.5 - scroll_height/window.innerHeight);
				requestAnimationFrame( animate );
				TWEEN.update();
				render();
			}
			
			var current_mesh = null;				
			var current_link = null;
			
			function render() {
				
				document.body.style.cursor = "default";
				
				if (current_page == 2 && !scrolling) {
					mousePortfolio();
				}
				
				else if (current_page == 3 && !scrolling) {
					mouseIcon ();
				}
				
				if (current_page == 2)
					{
					actualRotation += ( targetRotation - actualRotation ) * 0.05;
					portfolioClass.portfolio_container.rotation.y = actualRotation;
					}
				else
					{
					actualRotation = actualRotation%(2*Math.PI);
					targetRotation = 0;
					}
					
				
				renderer.clear();
				renderer.render( scene, camera );		
			}
			
			function noHoverPortfolio()
				{
						if (current_mesh != null)
							{
							current_mesh.material.color.set( 0xAAAAAA );
							current_mesh.video.pause();
							current_mesh = null;
							}
				}
			
			function noHoverLinks()
				{
						if (current_link != null)
							{
							current_link.rotation.y = 0;	
							current_link.position.z = 0;
	
							current_link = null;
							}
				}
				
			function mousePortfolio() {
				// update the picking ray with the camera and mouse position	
				raycaster.setFromCamera( mouse, camera );	
				
				// calculate objects intersecting the picking ray
				var intersects = raycaster.intersectObjects( portfolioClass.portfolio_container.children );
				
				if (intersects.length > 0 && $("#info_page").is(':hidden') && intersects[0].point.z > 0)
						{
						document.body.style.cursor = "pointer";
						if (intersects[0].object != current_mesh)
							{
							if (current_mesh != null)
								{
								current_mesh.material.color.set( 0xAAAAAA );
								current_mesh.video.pause();	
								}
							
							current_mesh = intersects[0].object;
							current_mesh.material.color.set( 0xffffff );
							current_mesh.video.play();
							}
						}
					else
						{
						noHoverPortfolio();
						}
			}
			
			function touchPortfolio( event ) {
				if ( event.touches.length === 1 ) {
					event.preventDefault();
					var touchPos = new THREE.Vector2();
					touchPos.x = ( event.touches[ 0 ].pageX / window.innerWidth ) * 2 - 1;
					touchPos.y =  - ( event.touches[ 0 ].pageY / window.innerHeight ) * 2 + 1;		
					raycaster.setFromCamera(touchPos, camera );		
				
					var intersects = raycaster.intersectObjects( portfolioClass.portfolio_container.children );
					
					if (intersects.length > 0 && $("#info_page").is(':hidden') && intersects[0].point.z > 0)
						{
						if (intersects[0].object != current_mesh)
							{
							if (current_mesh != null)
								{
								current_mesh.material.color.set( 0xAAAAAA );
								current_mesh.video.pause();	
								}
								
							current_mesh = intersects[0].object;
							current_mesh.material.color.set( 0xffffff );
							current_mesh.video.play();
							}
						}
					else
						{
						noHoverPortfolio();
						}
				}
			}
			
			function touchIcon( event ) {
				if ( event.touches.length === 1 ) {
					event.preventDefault();
					var touchPos = new THREE.Vector2();
					touchPos.x = ( event.touches[ 0 ].pageX / window.innerWidth ) * 2 - 1;
					touchPos.y =  - ( event.touches[ 0 ].pageY / window.innerHeight ) * 2 + 1;		
					raycaster.setFromCamera(touchPos, camera );	
				
					// calculate objects intersecting the picking ray			
					var intersects = raycaster.intersectObjects(linksClass.links_container.children);
					
					if (intersects.length > 0 && linksClass.showLinks == true)
							{
							if (intersects[0].object != current_link)
								{
								if (current_link != null)
									{
									current_link.rotation.y = 0;	
									current_link.position.z = 0;
									}
											
								current_link = intersects[0].object;
			
								if (current_link.position.x < 0)	
									{					
									current_link.rotation.y = Math.PI * 0.1;	
									current_link.position.z = 100;	
									}
								else
									{
									current_link.rotation.y = Math.PI * -0.1;								
									current_link.position.z = 250;	
									}
								}
							else
								{
								var open = window.open(current_link.link, '_blank');
								if (open == null || typeof(open)=='undefined')
									alert("New window blocked. Please visit:\n" + current_link.link);
								}
							}
					else
							{
							noHoverLinks();
							}	
				}
			}
			
			function mouseIcon () {
				// update the picking ray with the camera and mouse position	
				raycaster.setFromCamera( mouse, camera );	
				
				var intersects = raycaster.intersectObjects(linksClass.links_container.children);
				
				if (intersects.length > 0)
						{
						document.body.style.cursor = "pointer";
						if (intersects[0].object != current_link && linksClass.showLinks == true)
										{
										if (current_link != null)
											{
											current_link.rotation.y = 0;	
											current_link.position.z = 0;
											}
										
										current_link = intersects[0].object;
		
										if (current_link.position.x < 0)	
											{					
											current_link.rotation.y = Math.PI * 0.1;	
											current_link.position.z = 100;	
											}
										else
											{
											current_link.rotation.y = Math.PI * -0.1;								
											current_link.position.z = 250;	
											}
										}
						}
				else
						{
						noHoverLinks();
						}		
				
			}
			
			return {
				"init": init,
				"animate":animate,
				"noHoverLinks":noHoverLinks,
				"noHoverPortfolio":noHoverPortfolio
			};
		}	
</script>

</body>
</html>
